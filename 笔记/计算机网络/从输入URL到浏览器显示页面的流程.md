# 从输入URL到浏览器显示页面的流程

## 一、URL解析

### **1.1、地址解析**

首先判断你输入的是不是一个合法的URL，还时一个待搜索的关键字，会根据你输入的内容完成字符编码等操作。

### 1.2.安全检查

部分浏览器会对没有使用HTTPS协议的请求强制客户端使用，保证信息传输的安全性。

#### 1.2.1 HSTS

[HSTS](https://www.barretlee.com/blog/2015/10/22/hsts-intro/)

中间人劫持

https使用的是443端口号进行数据的传输，而默认的是80端口，如果用户在

#### 1.2.2 检查缓存

浏览器会先检查是否缓存了目标URL的页面，如果缓存且未过期，直接展示缓存，无需向浏览器请求。

## 二、DNS解析

### 2.1 什么是DNS？为什么需要它？

域名系统DNS是用来互联网通过域名来获取IP地址的协议。因为互联网值的每一台联网的机器都有一个唯一的IP地址作为标识，但是因为他是一串数字，不方便记忆，所以就需要将IP地址和域名进行转换，就是DNS解析。

### 2.2 DNS解析的过程

#### 2.2.1 查询缓存

为了提高查询过程，减轻根域名的负荷，和DNS的查询报文数量，所以在域名服务器中广泛的使用了高速缓存，所以首先会查询本机的DNS缓存。

#### 2.2.1 递归查询

如果你要访问`www.baidu.com`这个网站的时候，首先是查询高速缓存，如果没有找到，就要向根域名服务器发送查询请求,如果没有，就向com顶级域名服务器查找，依次类推。

## 三、TCP连接

当通过DNS找到目标的IP地址，我们就可以通往网络向目标机器发送请求了。

在TCP/IP协议中，是分成四层的，在发送数据的时候，每一层都要对数据进行封装。

![img](https://i.loli.net/2021/03/23/5KnzeyDcEdpArXJ.png)

### 

