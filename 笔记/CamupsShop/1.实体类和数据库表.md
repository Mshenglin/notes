#### 实体类分析

![Snipaste_2020-10-01_20-35-13.png](https://i.loli.net/2020/10/01/8IxsngV7M5CdQSZ.png)

#### 区域

##### 实体类

一共有五个字段，id(商铺id)、name(名字)、priority(权重)、创建时间(create_time)、更新时间(lastEaitTime)

```java
package com.xu.entity;
import java.io.Serializable;
import java.util.Date;

/**
 * @author Mashenglin
 */
public class Area implements Serializable {
    /**
     * 区域id
     */
    private Integer areaId;
    /**
     * 区域名称
     */
    private  String  areaName;
    /**
     * 权重
     */
    private  Integer priority;
    /**
     * 创建时间
     */
    private Date createTime;
    /**
     * 更新时间
     */
    private  Date lastEditTime;
}

```

##### SQL语句

```mysql
#创建区域表
CREATE TABLE tb_area(
#区域id
area_id INT(2) NOT NULL,
#区域名字
area_name VARCHAR(200) NOT NULL,
#权重值
priority INT(2) NOT NULL DEFAULT 0,
#创建时间
create_time DATETIME DEFAULT NULL,
#更新时间
last_edit_time DATETIME DEFAULT NULL,
#设置主键
PRIMARY KEY (area_id),
#设置唯一键
UNIQUE KEY UK_AREA(area_name)
)
#设置引擎  字符集
ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

```

#### 用户

![user.png](https://i.loli.net/2020/09/30/mYLJIFzx9hcvsDK.png)

##### 实体类

```java
package com.xu.entity;

import java.io.Serializable;
import java.util.Date;

/**
 * @author mashenglin
 */
public class PersonInfo implements Serializable {
    /**
     * 用户ID
     */
    private Long userId;
    /**
     * 用户姓名
     */
    private String name;
    /**
     * 用户头像
     */
    private String profileImg;
    /**
     * 用户邮箱
     */
    private String email;
    /**
     *用户性别
     */
    private String gender;
    /**
     * 用户状态
     */
    private Integer enableStatus;
    /**
     * 用户类型
     */
    private Integer userType;
    /**
     * 创建时间
     */
    private Date createTime;
    /**
     * 修改时间
     */
    private Date lastEditTime;
}

```

##### SQL

```mysql
CREATE TABLE tb_person_info(
-- 用户的id自增
user_id INT(10) NOT NULL AUTO_INCREMENT COMMENT '用户的id自增',
-- 用户名字
user_name VARCHAR(20) DEFAULT NULL COMMENT '用户名字',
-- 用户头像
profile_img VARCHAR(1024) DEFAULT NULL COMMENT '用户头像',
-- 用户邮箱
email VARCHAR(1024) DEFAULT NULL COMMENT '用户邮箱',
-- 用户性别
genter VARCHAR(2) DEFAULT NULL COMMENT '用户性别',
-- 用户状态
enable_status INT(2) NOT NULL DEFAULT '0' COMMENT '0.禁止使用本商城，1,允许使用本商城',
-- 用户类型
user_type INT(2) NOT NULL DEFAULT '1' COMMENT '1.普通用户2店家3超级管理员',
-- 注册时间
create_time DATETIME DEFAULT NULL COMMENT '注册时间',
-- 修改时间
last_edit_time DATETIME DEFAULT NULL COMMENT '修改时间',
-- 设置主键
PRIMARY KEY (user_id)
)ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
```

#### 微信账号和本地账号

![userId.png](https://i.loli.net/2020/10/01/KqMDJgrlR5IEsNZ.png)

##### 微信账号实体类

```java
public class WechatAuth implements Serializable {
    /**
     * 微信账号id
     */
    private Long wechatAuthId;
    /**
     * poenid
     */
    private String openId;
    /**
     * 创建日期
     */
    private Date createTime;
    /**
     * 用户实例
     */ 
    private PersonInfo personInfo;
}
```

##### SQL

```mysql
CREATE TABLE tb_wechat_anth(
wechat_anth_id INT(10) NOT NULL AUTO_INCREMENT COMMENT '微信用户id',
user_id INT(10) NOT NULL COMMENT '用户id',
open_id VARCHAR(1024) NOT NULL,
create_time DATETIME DEFAULT NULL COMMENT '创建时间',
-- 设置主键
PRIMARY KEY(wechat_anth_id),
-- 设置外键 
CONSTRAINT fk_wechatauth_profile FOREIGN KEY(user_id) REFERENCES tb_person_info(user_id)
)ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
```



##### 本地用户实体类

```java
public class LocalAuth  implements Serializable {
    /**
     * 本地账号id
     */
    private long  localAuthId;
    /**
     * 用户姓名
     */
    private  String username;
    /**
     * 用户密码
     */
    private  String password;
    /**
     * 创建时间
     */
    private Date createTime;
    /**
     * 修改时间
     */
    private Date lastEditTime;
    /**
     * 用户
     */
    private PersonInfo personInfo;
}
```

##### SQL

```mysql
CREATE TABLE tb_local_auth(
local_anth_id INT(10) NOT NULL AUTO_INCREMENT COMMENT '本地用户id',
user_id INT(10) NOT NULL COMMENT '用户id',
username VARCHAR(128) NOT NULL COMMENT '本地用户名',
PASSWORD  VARCHAR(129) NOT NULL COMMENT '密码',
create_time DATETIME DEFAULT NULL COMMENT '创建时间',
last_edit_time DATETIME DEFAULT NULL COMMENT '修改时间',
-- 确定主键
PRIMARY KEY(local_anth_id),
-- 唯一键
UNIQUE KEY uk_local_profile(username),
-- 外键约束
CONSTRAINT fk_localauth_profile FOREIGN KEY(user_id) REFERENCES tb_person_info(user_id)   
)ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
```

#### 头条

![Snipaste_2020-10-01_20-10-38.png](https://i.loli.net/2020/10/01/NXcmjtsKzQA67WE.png)

##### 实体类

```java
public class HeadLine {
	/**
	 * 头条id
	 */
	private Long lineId;
	/**
	 *头条名字
	 */
	private String lineName;
	/**
	 *头条链接
	 */
	private String lineLink;
	/**
	 *头条图片
	 */
	private String lineImg;
	/**
	 *头条展示权重
	 */
	private Integer priority;
	/**
	 *状态
	 */
	private Integer enableStatus;
	/**
	 *创建时间
	 */
	private Date createTime;
	/**
	 *修改时间
	 */
	private Date lastEditTime;
	}
```

##### SQL

```mysql
CREATE TABLE `tb_head_line` (
  `line_id` INT(100) NOT NULL AUTO_INCREMENT,
  `line_name` VARCHAR(1000) DEFAULT NULL,
  `line_link` VARCHAR(2000) NOT NULL,
  `line_img` VARCHAR(2000) NOT NULL,
  `priority` INT(2) DEFAULT NULL,
  `enable_status` INT(2) NOT NULL DEFAULT '0',
  `create_time` DATETIME DEFAULT NULL,
  `last_edit_time` DATETIME DEFAULT NULL,
  PRIMARY KEY (`line_id`)
) ENGINE=INNODB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8;
```

#### 店铺类别

![Snipaste_2020-10-01_20-21-43.png](https://i.loli.net/2020/10/01/5jLvh1EcxGfn6zA.png)

##### 店铺类别实体类

```java
public class ShopCategory {
	/**
	 *店铺类别id
	 */
	private Long shopCategoryId;
	/**
	 *店铺类别名字
	 */
	private String shopCategoryName;
	/**
	 *店铺类别描述
	 */
	private String shopCategoryDesc;
	/**
	 *店铺类别图片
	 */
	private String shopCategoryImg;
	/**
	 *店铺类别权重
	 */
	private Integer priority;
	/**
	 *店铺类别创建时间
	 */
	private Date createTime;
	/**
	 *店铺类别修改时间
	 */
	private Date lastEditTime;
	/**
	 *店铺类别上一级id
	 */
	private Long parentId;
	}
```

#### 店铺、

![Snipaste_2020-10-01_20-35-13.png](https://i.loli.net/2020/10/01/p5aCuB1mTUkMONo.png)

##### 店铺实体类

```java

public class Shop {
	/**
	 * 店铺id
	 */
	private Long shopId;
	/**
	 * 店主id
	 */
	private Long ownerId;
	/**
	 * 区域id
	 */
	private Long shopCategoryId;
	/**
	 * 店铺名称
	 */
	private String shopName;
	/**
	 * 区域
	 */
	private String shopDesc;
	/**
	 * 店铺地址
	 */
	private String shopAddr;
	 /**
	 * 店铺联系方式
	 */
	private String phone;
	/**
	 * 店铺照片
	 */
	private String shopImg;
	/**
	 * 区域
	 */
	private Double longitude;
	/**
	 * 区域
	 */
	private Double latitude;
	/**
	 * 店铺权重
	 */
	private Integer priority;
	/**
	 * 店铺创建时间
	 */
	private Date createTime;
	/**
	 * 店铺修改时间
	 */
	private Date lastEditTime;
	/**
	 * 店铺状态 -1不可用 0审核 1可用
	 */
	private Integer enableStatus;
	/**
	 * 超级管理员给店家的提示
	 */
	private String advice;
	/**
	 * 区域
	 */
	private Area area;
	/**
	 * 店铺创建人
	 */
	private ShopCategory shopCategory;
	/**
	 * 类别
	 */
	private ShopCategory parentCategory;
```

##### SQL

```mysql
CREATE TABLE `tb_shop` (
  `shop_id` INT(10) NOT NULL AUTO_INCREMENT,
  `owner_id` INT(10) NOT NULL COMMENT '店铺创建人',
  `area_id` INT(5) DEFAULT NULL,
  `shop_category_id` INT(11) DEFAULT NULL,
  `parent_category_id` INT(11) DEFAULT NULL,
  `shop_name` VARCHAR(256) COLLATE utf8_unicode_ci NOT NULL,
  `shop_desc` VARCHAR(1024) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shop_addr` VARCHAR(200) COLLATE utf8_unicode_ci DEFAULT NULL,
  `phone` VARCHAR(128) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shop_img` VARCHAR(1024) COLLATE utf8_unicode_ci DEFAULT NULL,
  `longitude` DOUBLE(16,12) DEFAULT NULL,
  `latitude` DOUBLE(16,12) DEFAULT NULL,
  `priority` INT(3) DEFAULT '0',
  `create_time` DATETIME DEFAULT NULL,
  `last_edit_time` DATETIME DEFAULT NULL,
  `enable_status` INT(2) NOT NULL DEFAULT '0',
  `advice` VARCHAR(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `fk_shop_profile` (`owner_id`),
  KEY `fk_shop_area` (`area_id`),
  KEY `fk_shop_shopcate` (`shop_category_id`),
  KEY `fk_shop_parentcate` (`parent_category_id`),
  CONSTRAINT `fk_shop_area` FOREIGN KEY (`area_id`) REFERENCES `tb_area` (`area_id`),
  CONSTRAINT `fk_shop_parentcate` FOREIGN KEY (`parent_category_id`) REFERENCES `tb_shop_category` (`shop_category_id`),
  CONSTRAINT `fk_shop_profile` FOREIGN KEY (`owner_id`) REFERENCES `tb_person_info` (`user_id`),
  CONSTRAINT `fk_shop_shopcate` FOREIGN KEY (`shop_category_id`) REFERENCES `tb_shop_category` (`shop_category_id`)
) ENGINE=INNODB AUTO_INCREMENT=29 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
```

#### 商品类别

##### 实体类

```java
public class ProductCategory {
	/**
	 *商品类别id
	 */
	private Long productCategoryId;
	/**
	 *店铺id
	 */
	private Long shopId;
	/**
	 *商品类别名字
	 */
	private String productCategoryName;
	/**
	 *商品类别描述
	 */
	private String productCategoryDesc;
	/**
	 *商品类别权重
	 */
	private Integer priority;
	/**
	 *商品类别创建时间
	 */
	private Date createTime;
	/**
	 *商品类别修改时间
	 */
	private Date lastEditTime;
}
```

##### SQL

```mysql
CREATE TABLE `tb_product_category` (
  `product_category_id` INT(11) NOT NULL AUTO_INCREMENT,
  `product_category_name` VARCHAR(100) NOT NULL,
  `product_category_desc` VARCHAR(500) DEFAULT NULL,
  `priority` INT(2) DEFAULT '0',
  `create_time` DATETIME DEFAULT NULL,
  `last_edit_time` DATETIME DEFAULT NULL,
  `shop_id` INT(20) NOT NULL DEFAULT '0',
  PRIMARY KEY (`product_category_id`),
  KEY `fk_procate_shop` (`shop_id`),
  CONSTRAINT `fk_procate_shop` FOREIGN KEY (`shop_id`) REFERENCES `tb_shop` (`shop_id`)
) ENGINE=INNODB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8;
```

#### 详情图片

##### 实体类

```sql
public class ProductImg {
	/**
	 *详情图片id
	 */
	private Long productImgId;
	/**
	 *详情图片地址
	 */
	private String imgAddr;
	/**
	 *详情图片描述
	 */
	private String imgDesc;
	/**
	 *详情图片显示权重
	 */
	private Integer priority;
	/**
	 *详情图片创建时间
	 */
	private Date createTime;
	/**
	 *详情图片用于那个商品展示
	 */
	private Long productId;
}
```

##### SQL

```mysql

CREATE TABLE `tb_product_img` (
  `product_img_id` INT(20) NOT NULL AUTO_INCREMENT,
  `img_addr` VARCHAR(2000) NOT NULL,
  `img_desc` VARCHAR(2000) DEFAULT NULL,
  `priority` INT(2) DEFAULT '0',
  `create_time` DATETIME DEFAULT NULL,
  `product_id` INT(20) DEFAULT NULL,
  PRIMARY KEY (`product_img_id`),
  KEY `fk_proimg_product` (`product_id`),
  CONSTRAINT `fk_proimg_product` FOREIGN KEY (`product_id`) REFERENCES `tb_product` (`product_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=INNODB AUTO_INCREMENT=38 DEFAULT CHARSET=utf8;
```

#### 商品

##### 商品实体类

```java
/**
	 * 商品
	 */
public class Product implements Serializable{
	/**
	 * 商品id
	 */
	private Long productId;
	/**
	 * 商品名称
	 */
	private String productName;
	/**
	 * 商品描述
	 */
	private String productDesc;
	/**
	 * 简略图
	 */
	private String imgAddr;
	/**
	 * 商品原价
	 */
	private String normalPrice;
	/**
	 * 商品折扣价
	 */
	private String promotionPrice;
	/**
	 * 商品权重
	 */
	private Integer priority;
	/**
	 * 商品创建时间
	 */
	private Date createTime;
	/**
	 * 商品修改时间
	 */
	private Date lastEditTime;
	/**
	 * 商品状态-1不可用0下架1在前台展示
	 */
	private Integer enableStatus;
	/**
	 * 商品
	 */
	private Integer point;
	/**
	 * 商品详情图片列表
	 */
	private List<ProductImg> productImgList;
	/**
	 * 商品分类
	 */
	private ProductCategory productCategory;
	/**
	 * 商品所在的店铺
	 */
```

##### SQL

```mysql
CREATE TABLE `tb_product` (
  `product_id` INT(100) NOT NULL AUTO_INCREMENT,
  `product_name` VARCHAR(100) NOT NULL,
  `product_desc` VARCHAR(2000) DEFAULT NULL,
  `img_addr` VARCHAR(2000) DEFAULT '',
  `normal_price` VARCHAR(100) DEFAULT NULL,
  `promotion_price` VARCHAR(100) DEFAULT NULL,
  `priority` INT(2) NOT NULL DEFAULT '0',
  `create_time` DATETIME DEFAULT NULL,
  `last_edit_time` DATETIME DEFAULT NULL,
  `enable_status` INT(2) NOT NULL DEFAULT '0',
  `point` INT(10) DEFAULT NULL,
  `product_category_id` INT(11) DEFAULT NULL,
  `shop_id` INT(20) NOT NULL DEFAULT '0',
  PRIMARY KEY (`product_id`),
  KEY `fk_product_shop` (`shop_id`),
  KEY `fk_product_procate` (`product_category_id`),
  CONSTRAINT `fk_product_procate` FOREIGN KEY (`product_category_id`) REFERENCES `tb_product_category` (`product_category_id`),
  CONSTRAINT `fk_product_shop` FOREIGN KEY (`shop_id`) REFERENCES `tb_shop` (`shop_id`)
) ENGINE=INNODB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8;
```

